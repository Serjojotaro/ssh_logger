# SSH_LOGGER

*SSH-logger* - утилита демон для отслеживаня SSH подключений через телеграмм бота на вашем LINUX хосте

Утилита использует следующие библиотеки - 
- time
- datetime
- requests
- re


------

#как установить 

для установки нам нужно скопировать фалйы на свой хост, далее:

1. скопировать файл ssh_notifier.service в путь /etc/systemd/system/
2. Скопировать файл ssh_logger.py в вашу директорию
3. отредактировать путь до исполняемого файла ssh_logger.py в файле ssh_notifier.service   
4. После чего можно запускать сервис и добавлять его в автозагрузку 'sudo systemctl start ssh_notifier' и 'sudo systemctl enable ssh_notifier' 

После этого бот будет присылать сообщения с типом действия(LOGOUT, LOGIN и ошибка аутентификации), с именем пользователя и его uid, временем, и PID процесса SSH сесии

# Как работает

Для постоянной работы пайтон скрипта создаётся UNIT в systemnd, для этого есть файл ssh_notifier.service 

Внутри есть настройка запуска скрипта 
ExecStart=/usr/bin/python3 /usr/bin/ssh_logger.py

Где /usr/bin/python3 - через что мы запускаем, а /usr/bin/ssh_logger.py сам скрипт для логирования ( путь можно изменить по желанию)

В самом скрипте ssh_logger.py логика работы следующая -


скрипт парсит лог файлы sshd LOGFILE = "/var/log/auth.log" (путь можете изменить) и при получении нужных строчек непосредственно высылает алармы на вашего телеграмм бота. 

